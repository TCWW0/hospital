# 远程教学模块验收指引

> 版本：2025-10-02 &nbsp;|&nbsp; 面向 QA / 业务验收

本文结合最新 Mock 数据（含 `lec-seed-004` 卒中全流程演练）提供完整的操作路径，帮助快速验证医生端、管理员端与患者端的远程教学功能是否覆盖关键流程环节。

---

## 1. 基础信息

| 角色 | 登录入口 | 菜单路径 | 关键页面 |
| ---- | -------- | -------- | -------- |
| 医生（DOCTOR） | `/doctor` | 侧边栏「远程教学」 | 讲座列表、发起讲座、讲座详情 |
| 管理员（ADMIN） | `/admin` | 侧边栏「远程教学调度」 | 讲座看板、讲座详情 |
| 患者（PATIENT） | `/patient` | 侧边栏「健康宣教」 | 讲座发现、讲座详情 |

> *Mock 登录方式同既有模块，可通过本地 `localStorage` 注入相应 `medical_union_user` 用户类型进行快速切换。*

---

## 2. Mock 数据概览

最新新增的卒中演练讲座 `lec-seed-004` 覆盖了大多数流程节点，便于核查是否缺漏。

```text
标题：卒中全流程应急演练与远程指导
阶段：post_verification（课后验证阶段）
状态：active
可见范围：医联体内部（mixed）
关键要点：
- 已完成报名通知、直播配置、身份核验（预检/直播）
- 正等待课后复盘（post_check 仍为 pending）
- 历史记录涵盖：申请、审核、发布通知、资料上传、验证登记
```

QA 可在医生端/管理员端的列表中通过关键字 “卒中” 快速定位本条记录。

---

## 3. 验收流程步骤

### 3.1 医生端（发起人与跟踪）

1. **进入讲座列表**：`医生工作台 → 远程教学`，确认列表展示以下信息：
   - 列数据包含阶段、状态、目标人群、标签。
   - 列表顶部具备筛选条件（阶段 / 状态 / 搜索）。
2. **查看讲座详情**：点击 “卒中全流程应急演练与远程指导”。
   - 「进度概览」展示讲座类型、可见范围、报名情况。
   - 「直播与接入」卡片显示会议链接、访问码、技术支持联系方式。
   - 「身份验证记录」包含预检 / 直播抽查 / 课后复盘记录。
   - 「参与人员」表格展示多角色人员及验证阶段标签。
3. **模拟跟进操作**（使用页面按钮触发 mock API）：
   - `标记直播开始` / `上传资料` 应能在页面上即时刷新数据（借助广播渠道同步）。
   - 若需测试申请创建，可通过 “发起讲座” 表单演练填写流程（保存后会在列表新增一条 `applied` 讲座）。

*验收要点：医生端是否能看到从申请到课后验证的全量信息、是否具备继续补充资料/刷新状态的能力。*

### 3.2 管理员端（审核与调度）

1. **进入教学看板**：`管理员后台 → 远程教学调度`。
   - 确认看板能够列出全部讲座（含卒中演练），可区分阶段与状态。
2. **详情页核查**：打开 “卒中全流程应急演练与远程指导”。
   - 「审核操作区」应显示可执行的流程按钮（例如驳回 / 审核通过 / 发布通知等），根据当前阶段自动启用或禁用。
   - 「资料与验证」模块展示直播资料列表与验证记录明细。
   - 「历史轨迹」时间轴包含 Mock 已记录的流程事件，可验证缺失节点。
3. **流程覆盖测试建议**：
   - 通过按钮触发 `recordLectureVerification`、`closeLectureEnrollment`、`compileLectureReport` 等 API，确认状态机推进逻辑。
   - 观察侧边的提醒（Message/Notification）是否提示操作结果。

*验收要点：管理员是否能完整掌握讲座状态、执行审核/调度动作，以及是否能在详情页追溯流程。*

### 3.3 患者端（健康宣教）

1. **进入健康宣教中心**：`患者中心 → 健康宣教`。
   - 列表默认展示可报名或已归档的公开/混合讲座。
   - 使用搜索关键字 “卒中” 可定位到演练讲座（因 `visibility: internal`，需要患者端具备相应 mock 权限方可展示）。
2. **详情页检查**：点击进入 “讲座详情”。
   - 确认 “讲座亮点”、“开课提醒”、“资料下载” 等模块正常显示。
   - “报名并提醒” 按钮应提示站内信提醒将被记录（Mock 提醒）。
3. **资料可见性**：验证列表中 `audience: mixed` 的资料是否展示，`medical_staff` 的资料在患者端是否隐藏或以提示形式展示。

*验收要点：患者是否能轻松找到相关讲座、了解提醒信息、下载公开资料。*

---

## 4. 常见验证场景速查

| 场景 | Mock 支撑 | 验收动作 |
| ---- | --------- | -------- |
| 申请阶段缺字段 | 新建讲座（医生端） | 留空资料上传，查看审核提示是否明确 |
| 审核流程缺口 | `lec-seed-004` / 调用 `reviewTeachingLecture` | 在管理员端重复审核，看状态与历史记录是否更新 |
| 身份验证不足 | `lec-seed-004` `ver-103` pending | 在管理员端补录验证记录并确认患者端刷新提示 |
| 课后报告归档 | 调用 `compileLectureReport` | 验证报告生成后状态是否变更为 `report_ready → archived` |

---

## 5. 输出与问题记录

- 建议在验收过程中记录：缺失的按钮、状态跳转异常、文案提示不完整等问题。
- 可在 `docs/architecture/remote-teaching-architecture.md` 的 “今日实现速记” 模块补充差异点，便于后续归档。

如需扩充新的场景（例如手术直播、公开患者宣教），可以沿用 `teaching.repository.ts` 的种子机制，快速添加额外 Mock 数据。
