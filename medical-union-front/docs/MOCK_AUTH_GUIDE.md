# Mock 认证功能使用说明

## 功能概述

为了支持前端演示和开发调试，系统提供了 Mock 认证功能，可以在不依赖后端服务的情况下进行登录测试。

## 配置方式

### 环境变量控制

通过 `VITE_USE_MOCK_AUTH` 环境变量控制是否启用 Mock 登录：

- `VITE_USE_MOCK_AUTH=true` - 启用 Mock 登录
- `VITE_USE_MOCK_AUTH=false` - 使用真实后端 API

### 环境配置文件

- **开发环境** (`.env.development`): 默认启用 Mock 登录，便于前端开发和演示
- **生产环境** (`.env.production`): 默认禁用 Mock 登录，使用真实 API

## Mock 测试账号

### 患者账号（需要11位手机号格式）
- 账号：`13800138000` 密码：`password123` 姓名：张三
- 账号：`13900139000` 密码：`patient123` 姓名：李四  
- 账号：`15000150000` 密码：`123456` 姓名：王五

### 医生账号（工号格式）
- 账号：`DOC001` 密码：`doctor123` 姓名：陈医生
- 账号：`DOC002` 密码：`password123` 姓名：刘医生
- 账号：`MD001` 密码：`123456` 姓名：赵主任

### 管理员账号
- 账号：`ADMIN001` 密码：`admin123` 姓名：系统管理员

## 切换方式

### 临时切换
在开发过程中临时切换到真实 API 或 Mock：

```bash
# 切换到 Mock 模式（演示）
echo "VITE_USE_MOCK_AUTH=true" > .env.local

# 切换到真实 API 模式（开发调试）
echo "VITE_USE_MOCK_AUTH=false" > .env.local
```

### 永久切换
修改对应环境的配置文件：
- 开发环境：`.env.development`
- 生产环境：`.env.production`

## 开发模式提示

在开发环境下，登录页面会显示当前使用的认证模式：
- **演示模式**：显示可用的 Mock 测试账号
- **开发模式**：提示当前使用真实 API

## 技术实现

### 代码特点
1. **无侵入性**：Mock 逻辑完全独立，不影响现有真实 API 代码
2. **环境感知**：通过环境变量自动切换，无需修改代码
3. **类型安全**：完整的 TypeScript 支持
4. **用户友好**：自动显示当前模式和可用测试账号

### 文件结构
```
src/
├── utils/mockAuth.ts      # Mock 登录逻辑和测试数据
├── views/Login.vue        # 登录页面（支持双模式）
└── ...
```

## 注意事项

1. **数据持久化**：Mock 登录生成的 token 仅在当前会话有效
2. **验证规则**：患者账号必须符合11位手机号格式，医生可使用工号
3. **网络延时**：Mock 登录模拟 800ms 网络延时，提供真实体验
4. **生产环境**：生产部署时确保 `VITE_USE_MOCK_AUTH=false`

## 使用场景

- **前端演示**：向客户展示系统功能，无需启动后端服务
- **开发调试**：前端开发阶段，独立于后端进度
- **自动化测试**：提供稳定的测试数据，不依赖外部服务
- **快速原型**：快速搭建可交互的原型系统